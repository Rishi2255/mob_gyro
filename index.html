<!DOCTYPE html>
<html>
  <head>
    <title>360 Stereo Upload Player</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-stereo-component@0.5.0/dist/aframe-stereo-component.min.js"></script>
    <style>
      #ui-overlay {
        position: absolute;
        top: 20px;
        left: 20px;
        z-index: 1000;
        background: rgba(0, 0, 0, 0.7);
        padding: 15px;
        border-radius: 8px;
        color: white;
        font-family: sans-serif;
      }
      button, input { margin-top: 10px; cursor: pointer; }
    </style>
  </head>
  <body>

    <div id="ui-overlay">
      <strong>360Â° Stereo Player</strong><br>
      <input type="file" id="fileInput" accept="video/*"><br>
      <button onclick="toggleFullScreen()">Toggle Fullscreen</button>
    </div>

    <a-scene id="mainScene" embedded>
      <a-assets>
        <video id="videoAsset" loop="true" crossorigin="anonymous" playsinline webkit-playsinline></video>
      </a-assets>

      <a-entity camera look-controls stereo="eye: left"></a-entity>

      <a-videosphere id="sphere" src="#videoAsset" stereo="eye: left; split: horizontal" rotation="0 -90 0"></a-videosphere>

      <a-sky color="#111"></a-sky>
    </a-scene>

    <script>
      const fileInput = document.getElementById('fileInput');
      const video = document.getElementById('videoAsset');
      const scene = document.getElementById('mainScene');

      // Handle File Upload
      fileInput.addEventListener('change', function() {
        const file = this.files[0];
        if (file) {
          const url = URL.createObjectURL(file);
          video.src = url;
          video.play();
          // Hide overlay once video starts for immersion (optional)
          // document.getElementById('ui-overlay').style.display = 'none';
        }
      });

      // Fullscreen Toggle
      function toggleFullScreen() {
        if (!document.fullscreenElement) {
            scene.requestFullscreen().catch(err => {
                alert(`Error attempting to enable full-screen mode: ${err.message}`);
            });
        } else {
            document.exitFullscreen();
        }
      }
    </script>
  </body>
</html>
