<!DOCTYPE html>
<html>
  <head>
    <title>360 Stereo - Top/Bottom Eye Split</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-stereo-component@0.5.0/dist/aframe-stereo-component.min.js"></script>
    <style>
      body { margin: 0; background: #000; color: white; font-family: sans-serif; }
      #ui { position: absolute; z-index: 100; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; background: rgba(0,0,0,0.9); padding: 20px; border-radius: 10px; }
      button { padding: 10px 20px; background: #2196F3; color: white; border: none; cursor: pointer; }
      .hidden { display: none; }
    </style>
  </head>
  <body>

    <div id="ui">
      <h3>Karate 360 Stereo Player</h3>
      <input type="file" id="fileInput" accept="video/mp4"><br><br>
      <button id="playBtn" class="hidden">START VR VIEW</button>
    </div>

    <a-scene id="scene" style="display:none">
      <a-assets>
        <video id="v" crossorigin="anonymous" playsinline webkit-playsinline loop="true"></video>
      </a-assets>

      <a-entity id="cameraRig">
        <a-entity camera look-controls stereo="eye: left"></a-entity>
      </a-entity>

      <a-videosphere src="#v" stereo="eye: left; split: vertical" rotation="0 -90 0"></a-videosphere>

      <a-videosphere src="#v" stereo="eye: right; split: vertical" rotation="0 -90 0"></a-videosphere>

    </a-scene>

    <script>
      const fileInput = document.getElementById('fileInput');
      const playBtn = document.getElementById('playBtn');
      const video = document.getElementById('v');

      fileInput.onchange = (e) => {
        video.src = URL.createObjectURL(e.target.files[0]);
        video.load();
        playBtn.classList.remove('hidden');
      };

      playBtn.onclick = () => {
        // Request Fullscreen
        const el = document.documentElement;
        if (el.requestFullscreen) el.requestFullscreen();
        
        document.getElementById('scene').style.display = "block";
        document.getElementById('ui').classList.add('hidden');
        
        video.play();
        // Skip the initial black frames in your karate video
        video.currentTime = 0.5; 
      };
    </script>
  </body>
</html>
