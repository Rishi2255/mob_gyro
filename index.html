<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Upload & View VR 360</title>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-stereo-component@0.5.0/dist/aframe-stereo-component.min.js"></script>
    <style>
      #upload-ui {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 999;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        font-family: sans-serif;
      }
      input { margin-top: 10px; }
    </style>
  </head>
  <body>

    <div id="upload-ui">
      <h2>VR 360 Video Player</h2>
      <p>Select a Stereoscopic (Top/Bottom) 360 Video</p>
      <input type="file" id="file-input" accept="video/*">
    </div>

    <a-scene style="display: none;" id="vr-scene">
      <a-assets>
        <video id="stereo-video" loop crossorigin="anonymous" playsinline webkit-playsinline></video>
      </a-assets>

      <a-entity camera look-controls stereo-camera="eye:left"></a-entity>

      <a-videosphere src="#stereo-video" rotation="0 -90 0" stereo="eye:left"></a-videosphere>
      <a-videosphere src="#stereo-video" rotation="0 -90 0" stereo="eye:right"></a-videosphere>
    </a-scene>

    <script>
      const fileInput = document.getElementById('file-input');
      const video = document.getElementById('stereo-video');
      const ui = document.getElementById('upload-ui');
      const scene = document.getElementById('vr-scene');

      fileInput.addEventListener('change', function() {
        const file = this.files[0];
        if (file) {
          // Create a local URL for the uploaded file
          const fileURL = URL.createObjectURL(file);
          video.src = fileURL;
          
          // Hide UI and show VR scene
          ui.style.display = 'none';
          scene.style.display = 'block';
          
          // Start playback
          video.play();
        }
      });
    </script>
  </body>
</html>
